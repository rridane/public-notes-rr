= ðŸ” Hashs cryptographiques & signatures numÃ©riques â€“ Cheatsheet

:toc: left
:toclevels: 3
:numbered:
:source-highlighter: rouge

== Hash

.exemple hash sha256
[source,shell]
----
echo -n "hello" | sha256sum
# RÃ©sultat : 2cf24dba5fb0a30e26e83b2ac5b9e29e1b161e5c1fa7425e73043362938b9824
----

.mauvaises pratiques mot de passe
[source,text]
----
hash("password123") == hash("password123")
â†’ vulnÃ©rable aux rainbow tables
----

.bonne pratique avec salt
[source,text]
----
hash("password123" + salt)
â†’ rend les attaques prÃ©-calculÃ©es inutiles
----

Utiliser des KDF comme :

* bcrypt
* scrypt
* argon2id (recommandÃ©)

== 3ï¸âƒ£ Signatures numÃ©riques âœï¸

=== Ã‰tape 1 : GÃ©nÃ©rer une paire de clÃ©s

[source,shell]
----
# ClÃ© privÃ©e RSA 2048 bits
openssl genpkey -algorithm RSA -out private.pem -pkeyopt rsa_keygen_bits:2048

# ClÃ© publique extraite
openssl rsa -pubout -in private.pem -out public.pem
----

.Fichier `private.pem` (extrait)
[source, text]
----
-----BEGIN PRIVATE KEY-----
MIIEvAIBADANBgkqhkiG9w0BAQEFAASC...
...
-----END PRIVATE KEY-----
----

.Fichier `public.pem` (extrait)
[source, text]
----
-----BEGIN PUBLIC KEY-----
MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8A...
...
-----END PUBLIC KEY-----
----

=== Ã‰tape 2 : CrÃ©er un fichier Ã  signer

[source,shell]
----
echo "message Ã  signer" > message.txt
----

.Contenu de `message.txt`
[source, text]
----
message Ã  signer
----

=== Ã‰tape 3 : Calculer le hash (optionnel)

[source,shell]
----
openssl dgst -sha256 message.txt
----

.Sortie
[source,text]
----
SHA256(message.txt)= 7da95fb20b36743ab6bd3be5cc49f71ee350aaf62e78f04b650cf3a9de7cc11e
----

â†’ Il sâ€™agit du **hash SHA-256** du contenu `message Ã  signer`.

=== Ã‰tape 4 : Signer le fichier (signature binaire)

[source,shell]
----
openssl dgst -sha256 -sign private.pem -out message.sig message.txt
----

â†’ Le fichier `message.sig` contient une **signature binaire RSA** du hash prÃ©cÃ©dent.

Pour le rendre lisible :

[source,shell]
----
base64 message.sig
----

.Exemple (rÃ©sultat base64 de la signature)
[source,text]
----
GRe4eIfRQQcsKMm8c+1GIdLr2c2q6L4qFzA3YH2w0LGphDj/oxYMoK8DJf+EZV3RGZQg...
----

=== Ã‰tape 5 : VÃ©rifier la signature

[source,shell]
----
openssl dgst -sha256 -verify public.pem -signature message.sig message.txt
----

.Sortie attendue
[source,text]
----
Verified OK
----

* `openssl dgst`
* `sha256sum`, `blake3sum`
* `gpg --sign`, `gpg --verify`
